<%= provide :title, @user_course.course.content %>
<div class="row">
  <div class="col-md-12">
    <div class="panel panel-default text-center">
      <div class="panel-heading">
        <h3><%= @user_course.course.content %></h3><hr>
        <%= @user_course.course.description %><hr>
        <%= t "user_courses.status" %>
        <%= render "shared/status_label", label: @user_course.status %>
      </div>
      <div class="progress">
        <div class="progress-bar progress-bar-success progress-bar-striped"
          style="width: <%= percent_subjects_completed @user_course %>">
          <%= percent_subjects_completed @user_course %>
        </div>
      </div>
      <div class="form-group">
        <% if @user_course.finished? %>
          <%= t "user_courses.gratz" %>
        <% end %>
      </div>
      <div class="form-group">
        <%= link_to t("user_courses.go_back"),
          user_courses_path, class: "btn btn-default" %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading text-center">
        <h3><%= t "courses.subjects" %></h3>
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-md-12">
            <% @user_course.trainee_subjects.each do |trainee_subject| %>
              <div class="row">
                <div class="col-md-7 col-md-offset-1">
                  <h3>
                    <%= link_to trainee_subject.subject_content,
                      trainee_subject_path(trainee_subject) %>
                  </h3>
                  <p><%= trainee_subject.subject_description %></p>
                  <%= render "shared/status_label", label: trainee_subject.status %>
                </div>
                <div class="col-md-4">
                  <br>
                  <%= link_to t("user_courses.view_subject"),
                    trainee_subject_path(trainee_subject), class: "btn btn-primary" %>
                </div>
              </div>
              <hr>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    
    <div class="panel panel-default text-center">
      <div class="panel-heading">
        <h3><%= t :all_users %></h3>
      </div>
      <ul class="list-unstyled">
        <% @user_courses.each do |user_course| %>
          <div class="input-group fields">
            <div class="form-control">
              <span>
                <%= link_to user_course.user.name, user_course.user %>
              </span>
            </div>
            <div class="input-group-addon">
              <%= percent_subjects_completed user_course %>
            </div>
          </div>
        <% end %>
      </ul>
      <%= paginate @user_courses %>
    </div>
  </div>
  
  <div class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading text-center">
        <h3><%= (@bottom == Settings.activity.my_activities) ?
          t("activity.all_activities") : t("activity.my_activities") %></h3>
      </div>
      <div class="panel-body">
        <ul class="list-unstyled">
          <% if @activities.any? %>
            <%= render @activities %>
          <% end %>
          <hr/>
        </ul>
        <div class="text-center">
          <div><%= paginate @activities,
            window: Settings.activity.pagination.window %></div>
          <%= link_to user_course_path @user_course, action_type: @bottom do %>
            <div class="btn btn-primary">
              <%= (@bottom == Settings.activity.my_activities) ?
                t("activity.my_activities") : t("activity.all_activities") %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

